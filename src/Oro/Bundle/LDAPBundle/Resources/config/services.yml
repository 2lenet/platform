parameters:
    fr3d_ldap.security.authentication.provider.class: Oro\Bundle\LDAPBundle\Security\LdapProvider
    fr3d_ldap.ldap_driver.zend.class:                 Oro\Bundle\LDAPBundle\LDAP\ZendLdapDriver
    oro_ldap.extension.user_type.class:               Oro\Bundle\LDAPBundle\Form\Extension\UserTypeExtension
    oro_ldap.provider.user.class:                     Oro\Bundle\LDAPBundle\Provider\UserProvider
    oro_ldap.manager.import.class:                    Oro\Bundle\LDAPBundle\Manager\ImportManager
    oro_ldap.manager.export.class:                    Oro\Bundle\LDAPBundle\Manager\ExportManager

services:
    fr3d_ldap.security.authentication.provider:
        class: %fr3d_ldap.security.authentication.provider.class%
        arguments:
            - @security.user_checker
            - ""
            - ""
            - @fr3d_ldap.ldap_manager
            - @oro_config.global
            - %security.authentication.hide_user_not_found%

    oro_ldap.ldap.ldap_manager:
        class: Oro\Bundle\LDAPBundle\LDAP\LdapManager
        arguments:
            - @doctrine
            - @fr3d_ldap.ldap_driver
            - @fr3d_ldap.user_manager
            - %fr3d_ldap.ldap_manager.parameters%
        calls:
            - [updateOroConfiguration, [@oro_config.global]]

    oro_ldap.extension.user_type:
        class: %oro_ldap.extension.user_type.class%
        tags:
            - { name: form.type_extension, alias: oro_user_user }

    oro_ldap.provider.user:
        class: %oro_ldap.provider.user.class%
        arguments:
            - @doctrine

    oro_ldap.manager.import:
        class: %oro_ldap.manager.import.class%
        arguments:
            - @fr3d_ldap.ldap_manager
            - @oro_user.manager
            - @doctrine
            - @oro_ldap.provider.user

    oro_ldap.manager.export:
        class: %oro_ldap.manager.export.class%
        arguments:
            - @fr3d_ldap.ldap_manager
            - @oro_user.manager
            - @oro_ldap.provider.user
